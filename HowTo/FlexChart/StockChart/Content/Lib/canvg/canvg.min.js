(function(){function n(){var n={};return n.FRAMERATE=30,n.MAX_VIRTUAL_PIXELS=3e4,n.init=function(t){var i=0;n.UniqueId=function(){return i++,"canvg"+i};n.Definitions={};n.Styles={};n.Animations=[];n.Images=[];n.ctx=t;n.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(n,t){this.viewPorts.push({width:n,height:t})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(n){return n!=null&&typeof n=="number"?n:n=="x"?this.width():n=="y"?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},n.init(),n.ImagesLoaded=function(){for(var t=0;t<n.Images.length;t++)if(!n.Images[t].loaded)return!1;return!0},n.trim=function(n){return n.replace(/^\s+|\s+$/g,"")},n.compressSpaces=function(n){return n.replace(/[\s\r\t\n]+/gm," ")},n.ajax=function(n){var t;return(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t)?(t.open("GET",n,!1),t.send(null),t.responseText):null},n.parseXml=function(n){var i,t;return window.DOMParser?(i=new DOMParser,i.parseFromString(n,"text/xml")):(n=n.replace(/<!DOCTYPE svg[^>]*>/,""),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n),t)},n.Property=function(n,t){this.name=n;this.value=t},n.Property.prototype.getValue=function(){return this.value},n.Property.prototype.hasValue=function(){return this.value!=null&&this.value!==""},n.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var n=parseFloat(this.value);return(this.value+"").match(/%$/)&&(n=n/100),n},n.Property.prototype.valueOrDefault=function(n){return this.hasValue()?this.value:n},n.Property.prototype.numValueOrDefault=function(n){return this.hasValue()?this.numValue():n},n.Property.prototype.addOpacity=function(t){var r=this.value,i;return t!=null&&t!=""&&typeof this.value=="string"&&(i=new RGBColor(this.value),i.ok&&(r="rgba("+i.r+", "+i.g+", "+i.b+", "+t+")")),new n.Property(this.name,r)},n.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),n.Definitions[t]},n.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0},n.Property.prototype.getFillStyleDefinition=function(t,i){var r=this.getDefinition(),u;return r!=null&&r.createGradient?r.createGradient(n.ctx,t,i):r!=null&&r.createPattern?(r.getHrefAttribute().hasValue()&&(u=r.attribute("patternTransform"),r=r.getHrefAttribute().getDefinition(),u.hasValue()&&(r.attribute("patternTransform",!0).value=u.value)),r.createPattern(n.ctx,t)):null},n.Property.prototype.getDPI=function(){return 96},n.Property.prototype.getEM=function(t){var i=12,r=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);return r.hasValue()&&(i=r.toPixels(t)),i},n.Property.prototype.getUnits=function(){var n=this.value+"";return n.replace(/[0-9\.\-]/g,"")},n.Property.prototype.toPixels=function(t,i){var r,u;return this.hasValue()?(r=this.value+"",r.match(/em$/))?this.numValue()*this.getEM(t):r.match(/ex$/)?this.numValue()*this.getEM(t)/2:r.match(/px$/)?this.numValue():r.match(/pt$/)?this.numValue()*this.getDPI(t)*(1/72):r.match(/pc$/)?this.numValue()*15:r.match(/cm$/)?this.numValue()*this.getDPI(t)/2.54:r.match(/mm$/)?this.numValue()*this.getDPI(t)/25.4:r.match(/in$/)?this.numValue()*this.getDPI(t):r.match(/%$/)?this.numValue()*n.ViewPort.ComputeSize(t):(u=this.numValue(),i&&u<1)?u*n.ViewPort.ComputeSize(t):u:0},n.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var n=this.value+"";return n.match(/s$/)?this.numValue()*1e3:(n.match(/ms$/),this.numValue())},n.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var n=this.value+"";return n.match(/deg$/)?this.numValue()*(Math.PI/180):n.match(/grad$/)?this.numValue()*(Math.PI/200):n.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},n.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(t,i,r,u,f,e){var o=e!=null?this.Parse(e):this.CreateFont("","","","","",n.ctx.font);return{fontFamily:f||o.fontFamily,fontSize:u||o.fontSize,fontStyle:t||o.fontStyle,fontWeight:r||o.fontWeight,fontVariant:i||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(i){for(var e={},u=n.trim(n.compressSpaces(i||"")).split(" "),f={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",r=0;r<u.length;r++)f.fontStyle||t.Styles.indexOf(u[r])==-1?f.fontVariant||t.Variants.indexOf(u[r])==-1?f.fontWeight||t.Weights.indexOf(u[r])==-1?f.fontSize?u[r]!="inherit"&&(o+=u[r]):(u[r]!="inherit"&&(e.fontSize=u[r].split("/")[0]),f.fontStyle=f.fontVariant=f.fontWeight=f.fontSize=!0):(u[r]!="inherit"&&(e.fontWeight=u[r]),f.fontStyle=f.fontVariant=f.fontWeight=!0):(u[r]!="inherit"&&(e.fontVariant=u[r]),f.fontStyle=f.fontVariant=!0):(u[r]!="inherit"&&(e.fontStyle=u[r]),f.fontStyle=!0);return o!=""&&(e.fontFamily=o),e}},n.ToNumberArray=function(t){for(var i=n.trim(n.compressSpaces((t||"").replace(/,/g," "))).split(" "),r=0;r<i.length;r++)i[r]=parseFloat(i[r]);return i},n.Point=function(n,t){this.x=n;this.y=t},n.Point.prototype.angleTo=function(n){return Math.atan2(n.y-this.y,n.x-this.x)},n.Point.prototype.applyTransform=function(n){var t=this.x*n[0]+this.y*n[2]+n[4],i=this.x*n[1]+this.y*n[3]+n[5];this.x=t;this.y=i},n.CreatePoint=function(t){var i=n.ToNumberArray(t);return new n.Point(i[0],i[1])},n.CreatePath=function(t){for(var r=n.ToNumberArray(t),u=[],i=0;i<r.length;i+=2)u.push(new n.Point(r[i],r[i+1]));return u},n.BoundingBox=function(n,t,r,u){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(n,t){n!=null&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=n,this.x2=n),n<this.x1&&(this.x1=n),n>this.x2&&(this.x2=n));t!=null&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))};this.addX=function(n){this.addPoint(n,null)};this.addY=function(n){this.addPoint(null,n)};this.addBoundingBox=function(n){this.addPoint(n.x1,n.y1);this.addPoint(n.x2,n.y2)};this.addQuadraticCurve=function(n,t,i,r,u,f){var e=n+2/3*(i-n),o=t+2/3*(r-t),s=e+1/3*(u-n),h=o+1/3*(f-t);this.addBezierCurve(n,t,e,s,o,h,u,f)};this.addBezierCurve=function(n,t,r,u,f,e,o,s){var h=[n,t],p=[r,u],d=[f,e],w=[o,s],a,k,v,y;for(this.addPoint(h[0],h[1]),this.addPoint(w[0],w[1]),i=0;i<=1;i++){var c=function(n){return Math.pow(1-n,3)*h[i]+3*Math.pow(1-n,2)*n*p[i]+3*(1-n)*Math.pow(n,2)*d[i]+Math.pow(n,3)*w[i]},l=6*h[i]-12*p[i]+6*d[i],b=-3*h[i]+9*p[i]-9*d[i]+3*w[i],g=3*p[i]-3*h[i];if(b==0){if(l==0)continue;a=-g/l;0<a&&a<1&&(i==0&&this.addX(c(a)),i==1&&this.addY(c(a)));continue}(k=Math.pow(l,2)-4*g*b,k<0)||(v=(-l+Math.sqrt(k))/(2*b),0<v&&v<1&&(i==0&&this.addX(c(v)),i==1&&this.addY(c(v))),y=(-l-Math.sqrt(k))/(2*b),0<y&&y<1&&(i==0&&this.addX(c(y)),i==1&&this.addY(c(y))))}};this.isPointInBox=function(n,t){return this.x1<=n&&n<=this.x2&&this.y1<=t&&t<=this.y2};this.addPoint(n,t);this.addPoint(r,u)},n.Transform=function(t){var u=this,r,i;for(this.Type={},this.Type.translate=function(t){this.p=n.CreatePoint(t);this.apply=function(n){n.translate(this.p.x||0,this.p.y||0)};this.unapply=function(n){n.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(n){n.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var i=n.ToNumberArray(t);this.angle=new n.Property("angle",i[0]);this.cx=i[1]||0;this.cy=i[2]||0;this.apply=function(n){n.translate(this.cx,this.cy);n.rotate(this.angle.toRadians());n.translate(-this.cx,-this.cy)};this.unapply=function(n){n.translate(this.cx,this.cy);n.rotate(-1*this.angle.toRadians());n.translate(-this.cx,-this.cy)};this.applyToPoint=function(n){var t=this.angle.toRadians();n.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);n.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]);n.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=n.CreatePoint(t);this.apply=function(n){n.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(n){n.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(n){n.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=n.ToNumberArray(t);this.apply=function(n){n.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(n){n.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=u.Type.matrix;this.base(t);this.angle=new n.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(n){this.base=u.Type.SkewBase;this.base(n);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(n){this.base=u.Type.SkewBase;this.base(n);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(n){for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(n)},this.unapply=function(n){for(var t=this.transforms.length-1;t>=0;t--)this.transforms[t].unapply(n)},this.applyToPoint=function(n){for(var t=0;t<this.transforms.length;t++)this.transforms[t].applyToPoint(n)},r=n.trim(n.compressSpaces(t)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=0;i<r.length;i++){var f=n.trim(r[i].split("(")[0]),o=r[i].split("(")[1].replace(")",""),e=new this.Type[f](o);e.type=f;this.transforms.push(e)}},n.AspectRatio=function(t,i,r,u,f,e,o,s,h,c){i=n.compressSpaces(i);i=i.replace(/^defer\s/,"");var w=i.split(" ")[0]||"xMidYMid",l=i.split(" ")[1]||"meet",y=r/u,p=f/e,a=Math.min(y,p),v=Math.max(y,p);l=="meet"&&(u*=a,e*=a);l=="slice"&&(u*=v,e*=v);h=new n.Property("refX",h);c=new n.Property("refY",c);h.hasValue()&&c.hasValue()?t.translate(-a*h.toPixels("x"),-a*c.toPixels("y")):(w.match(/^xMid/)&&(l=="meet"&&a==p||l=="slice"&&v==p)&&t.translate(r/2-u/2,0),w.match(/YMid$/)&&(l=="meet"&&a==y||l=="slice"&&v==y)&&t.translate(0,f/2-e/2),w.match(/^xMax/)&&(l=="meet"&&a==p||l=="slice"&&v==p)&&t.translate(r-u,0),w.match(/YMax$/)&&(l=="meet"&&a==y||l=="slice"&&v==y)&&t.translate(0,f-e));w=="none"?t.scale(y,p):l=="meet"?t.scale(a,a):l=="slice"&&t.scale(v,v);t.translate(o==null?0:-o,s==null?0:-s)},n.Element={},n.EmptyProperty=new n.Property("EMPTY",""),n.Element.ElementBase=function(t){var f,h,o,s,e,r,i,u;if(this.attributes={},this.styles={},this.children=[],this.attribute=function(t,i){var r=this.attributes[t];return r!=null?r:(i==!0&&(r=new n.Property(t,""),this.attributes[t]=r),r||n.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if(t.match(/:href$/))return this.attributes[t];return n.EmptyProperty},this.style=function(t,i){var r=this.styles[t],u,e,f;return r!=null?r:(u=this.attribute(t),u!=null&&u.hasValue())?(this.styles[t]=u,u):(e=this.parent,e!=null&&(f=e.style(t),f!=null&&f.hasValue()))?f:(i==!0&&(r=new n.Property(t,""),this.styles[t]=r),r||n.EmptyProperty)},this.render=function(n){var t,i;this.style("display").value!="none"&&this.attribute("visibility").value!="hidden"&&(n.save(),this.attribute("mask").hasValue()?(t=this.attribute("mask").getDefinition(),t!=null&&t.apply(n,this)):this.style("filter").hasValue()?(i=this.style("filter").getDefinition(),i!=null&&i.apply(n,this)):(this.setContext(n),this.renderChildren(n),this.clearContext(n)),n.restore())},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(n){for(var t=0;t<this.children.length;t++)this.children[t].render(n)},this.addChild=function(t,i){var r=t;i&&(r=n.CreateElement(t));r.parent=this;this.children.push(r)},t!=null&&t.nodeType==1){for(u=0;u<t.childNodes.length;u++)f=t.childNodes[u],f.nodeType==1&&this.addChild(f,!0),this.captureTextNodes&&f.nodeType==3&&(h=f.nodeValue||f.text||"",n.trim(n.compressSpaces(h))!=""&&this.addChild(new n.Element.tspan(f),!1));for(u=0;u<t.attributes.length;u++)o=t.attributes[u],this.attributes[o.nodeName]=new n.Property(o.nodeName,o.nodeValue);if(i=n.Styles[t.nodeName],i!=null)for(r in i)this.styles[r]=i[r];if(this.attribute("class").hasValue())for(s=n.compressSpaces(this.attribute("class").value).split(" "),e=0;e<s.length;e++){if(i=n.Styles["."+s[e]],i!=null)for(r in i)this.styles[r]=i[r];if(i=n.Styles[t.nodeName+"."+s[e]],i!=null)for(r in i)this.styles[r]=i[r]}if(this.attribute("id").hasValue()&&(i=n.Styles["#"+this.attribute("id").value],i!=null))for(r in i)this.styles[r]=i[r];if(this.attribute("style").hasValue())for(i=this.attribute("style").value.split(";"),u=0;u<i.length;u++)if(n.trim(i[u])!=""){var c=i[u].split(":"),r=n.trim(c[0]),l=n.trim(c[1]);this.styles[r]=new n.Property(r,l)}this.attribute("id").hasValue()&&n.Definitions[this.attribute("id").value]==null&&(n.Definitions[this.attribute("id").value]=this)}},n.Element.RenderedElementBase=function(t){this.base=n.Element.ElementBase;this.base(t);this.setContext=function(t){var i,u,r,o,f,e,h,s;this.style("fill").isUrlDefinition()?(u=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")),u!=null&&(t.fillStyle=u)):this.style("fill").hasValue()&&(i=this.style("fill"),i.value=="currentColor"&&(i.value=this.style("color").value),t.fillStyle=i.value=="none"?"rgba(0,0,0,0)":i.value);this.style("fill-opacity").hasValue()&&(i=new n.Property("fill",t.fillStyle),i=i.addOpacity(this.style("fill-opacity").value),t.fillStyle=i.value);this.style("stroke").isUrlDefinition()?(u=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")),u!=null&&(t.strokeStyle=u)):this.style("stroke").hasValue()&&(r=this.style("stroke"),r.value=="currentColor"&&(r.value=this.style("color").value),t.strokeStyle=r.value=="none"?"rgba(0,0,0,0)":r.value);this.style("stroke-opacity").hasValue()&&(r=new n.Property("stroke",t.strokeStyle),r=r.addOpacity(this.style("stroke-opacity").value),t.strokeStyle=r.value);this.style("stroke-width").hasValue()&&(o=this.style("stroke-width").toPixels(),t.lineWidth=o==0?.001:o);this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value);this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value);this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value);this.style("stroke-dasharray").hasValue()&&(f=n.ToNumberArray(this.style("stroke-dasharray").value),typeof t.setLineDash!="undefined"?t.setLineDash(f):typeof t.webkitLineDash!="undefined"?t.webkitLineDash=f:typeof t.mozDash!="undefined"&&(t.mozDash=f),e=this.style("stroke-dashoffset").numValueOrDefault(1),typeof t.lineDashOffset!="undefined"?t.lineDashOffset=e:typeof t.webkitLineDashOffset!="undefined"?t.webkitLineDashOffset=e:typeof t.mozDashOffset!="undefined"&&(t.mozDashOffset=e));typeof t.font!="undefined"&&(t.font=n.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString());this.attribute("transform").hasValue()&&(h=new n.Transform(this.attribute("transform").value),h.apply(t));this.style("clip-path").hasValue()&&(s=this.style("clip-path").getDefinition(),s!=null&&s.apply(t));this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},n.Element.RenderedElementBase.prototype=new n.Element.ElementBase,n.Element.PathElementBase=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.path=function(t){return t!=null&&t.beginPath(),new n.BoundingBox};this.renderChildren=function(t){var i,u,r;if(this.path(t),n.Mouse.checkPath(this,t),t.fillStyle!=""&&(this.attribute("fill-rule").hasValue()?t.fill(this.attribute("fill-rule").value):t.fill()),t.strokeStyle!=""&&t.stroke(),i=this.getMarkers(),i!=null){if(this.style("marker-start").isUrlDefinition()&&(r=this.style("marker-start").getDefinition(),r.render(t,i[0][0],i[0][1])),this.style("marker-mid").isUrlDefinition())for(r=this.style("marker-mid").getDefinition(),u=1;u<i.length-1;u++)r.render(t,i[u][0],i[u][1]);this.style("marker-end").isUrlDefinition()&&(r=this.style("marker-end").getDefinition(),r.render(t,i[i.length-1][0],i[i.length-1][1]))}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}},n.Element.PathElementBase.prototype=new n.Element.RenderedElementBase,n.Element.svg=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseClearContext=this.clearContext;this.clearContext=function(t){this.baseClearContext(t);n.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(t){var i,r,f,e;if(t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y")),i=n.ViewPort.width(),r=n.ViewPort.height(),this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),typeof this.root=="undefined"&&(i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),f=0,e=0,this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(f=-this.attribute("refX").toPixels("x"),e=-this.attribute("refY").toPixels("y")),t.beginPath(),t.moveTo(f,e),t.lineTo(i,e),t.lineTo(i,r),t.lineTo(f,r),t.closePath(),t.clip()),n.ViewPort.SetCurrent(i,r),this.attribute("viewBox").hasValue()){var u=n.ToNumberArray(this.attribute("viewBox").value),o=u[0],s=u[1];i=u[2];r=u[3];n.AspectRatio(t,this.attribute("preserveAspectRatio").value,n.ViewPort.width(),i,n.ViewPort.height(),r,o,s,this.attribute("refX").value,this.attribute("refY").value);n.ViewPort.RemoveCurrent();n.ViewPort.SetCurrent(u[2],u[3])}}},n.Element.svg.prototype=new n.Element.RenderedElementBase,n.Element.rect=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y"),u=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=u),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(u=o),u=Math.min(u,f/2),o=Math.min(o,e/2),t!=null&&(t.beginPath(),t.moveTo(i+u,r),t.lineTo(i+f-u,r),t.quadraticCurveTo(i+f,r,i+f,r+o),t.lineTo(i+f,r+e-o),t.quadraticCurveTo(i+f,r+e,i+f-u,r+e),t.lineTo(i+u,r+e),t.quadraticCurveTo(i,r+e,i,r+e-o),t.lineTo(i,r+o),t.quadraticCurveTo(i,r,i+u,r),t.closePath()),new n.BoundingBox(i,r,i+f,r+e)}},n.Element.rect.prototype=new n.Element.PathElementBase,n.Element.circle=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var r=this.attribute("cx").toPixels("x"),u=this.attribute("cy").toPixels("y"),i=this.attribute("r").toPixels();return t!=null&&(t.beginPath(),t.arc(r,u,i,0,Math.PI*2,!0),t.closePath()),new n.BoundingBox(r-i,u-i,r+i,u+i)}},n.Element.circle.prototype=new n.Element.PathElementBase,n.Element.ellipse=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var e=4*((Math.sqrt(2)-1)/3),f=this.attribute("rx").toPixels("x"),u=this.attribute("ry").toPixels("y"),i=this.attribute("cx").toPixels("x"),r=this.attribute("cy").toPixels("y");return t!=null&&(t.beginPath(),t.moveTo(i,r-u),t.bezierCurveTo(i+e*f,r-u,i+f,r-e*u,i+f,r),t.bezierCurveTo(i+f,r+e*u,i+e*f,r+u,i,r+u),t.bezierCurveTo(i-e*f,r+u,i-f,r+e*u,i-f,r),t.bezierCurveTo(i-f,r-e*u,i-e*f,r-u,i,r-u),t.closePath()),new n.BoundingBox(i-f,r-u,i+f,r+u)}},n.Element.ellipse.prototype=new n.Element.PathElementBase,n.Element.line=function(t){this.base=n.Element.PathElementBase;this.base(t);this.getPoints=function(){return[new n.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new n.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(t){var i=this.getPoints();return t!=null&&(t.beginPath(),t.moveTo(i[0].x,i[0].y),t.lineTo(i[1].x,i[1].y)),new n.BoundingBox(i[0].x,i[0].y,i[1].x,i[1].y)};this.getMarkers=function(){var n=this.getPoints(),t=n[0].angleTo(n[1]);return[[n[0],t],[n[1],t]]}},n.Element.line.prototype=new n.Element.PathElementBase,n.Element.polyline=function(t){this.base=n.Element.PathElementBase;this.base(t);this.points=n.CreatePath(this.attribute("points").value);this.path=function(t){var r=new n.BoundingBox(this.points[0].x,this.points[0].y),i;for(t!=null&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y)),i=1;i<this.points.length;i++)r.addPoint(this.points[i].x,this.points[i].y),t!=null&&t.lineTo(this.points[i].x,this.points[i].y);return r};this.getMarkers=function(){for(var n=[],t=0;t<this.points.length-1;t++)n.push([this.points[t],this.points[t].angleTo(this.points[t+1])]);return n.push([this.points[this.points.length-1],n[n.length-1][1]]),n}},n.Element.polyline.prototype=new n.Element.PathElementBase,n.Element.polygon=function(t){this.base=n.Element.polyline;this.base(t);this.basePath=this.path;this.path=function(n){var t=this.basePath(n);return n!=null&&(n.lineTo(this.points[0].x,this.points[0].y),n.closePath()),t}},n.Element.polygon.prototype=new n.Element.polyline,n.Element.path=function(t){this.base=n.Element.PathElementBase;this.base(t);var i=this.attribute("d").value;i=i.replace(/,/gm," ");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");i=i.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([0-9])([+\-])/gm,"$1 $2");i=i.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");i=i.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");i=n.compressSpaces(i);i=n.trim(i);this.PathParser=new function(t){this.tokens=t.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new n.Point(0,0);this.control=new n.Point(0,0);this.current=new n.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){return this.isEnd()?!0:this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1};this.getToken=function(){return this.i++,this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var t=new n.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)};this.getAsControlPoint=function(){var n=this.getPoint();return this.control=n,n};this.getAsCurrentPoint=function(){var n=this.getPoint();return this.current=n,n};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t")return this.current;return new n.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)};this.makeAbsolute=function(n){return this.isRelativeCommand()&&(n.x+=this.current.x,n.y+=this.current.y),n};this.addMarker=function(n,t,i){i!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i));this.addMarkerAngle(n,t==null?null:t.angleTo(n))};this.addMarkerAngle=function(n,t){this.points.push(n);this.angles.push(t)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var t,n=0;n<this.angles.length;n++)if(this.angles[n]==null)for(t=n+1;t<this.angles.length;t++)if(this.angles[t]!=null){this.angles[n]=this.angles[t];break}return this.angles}}(i);this.path=function(t){var i=this.PathParser,c,ft,f,y,s,u,r,w;for(i.reset(),c=new n.BoundingBox,t!=null&&t.beginPath();!i.isEnd();){i.nextCommand();switch(i.command){case"M":case"m":for(f=i.getAsCurrentPoint(),i.addMarker(f),c.addPoint(f.x,f.y),t!=null&&t.moveTo(f.x,f.y),i.start=i.current;!i.isCommandOrEnd();)f=i.getAsCurrentPoint(),i.addMarker(f,i.start),c.addPoint(f.x,f.y),t!=null&&t.lineTo(f.x,f.y);break;case"L":case"l":while(!i.isCommandOrEnd())ft=i.current,f=i.getAsCurrentPoint(),i.addMarker(f,ft),c.addPoint(f.x,f.y),t!=null&&t.lineTo(f.x,f.y);break;case"H":case"h":while(!i.isCommandOrEnd())y=new n.Point((i.isRelativeCommand()?i.current.x:0)+i.getScalar(),i.current.y),i.addMarker(y,i.current),i.current=y,c.addPoint(i.current.x,i.current.y),t!=null&&t.lineTo(i.current.x,i.current.y);break;case"V":case"v":while(!i.isCommandOrEnd())y=new n.Point(i.current.x,(i.isRelativeCommand()?i.current.y:0)+i.getScalar()),i.addMarker(y,i.current),i.current=y,c.addPoint(i.current.x,i.current.y),t!=null&&t.lineTo(i.current.x,i.current.y);break;case"C":case"c":while(!i.isCommandOrEnd()){var s=i.current,l=i.getPoint(),u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,l);c.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,r.x,r.y);t!=null&&t.bezierCurveTo(l.x,l.y,u.x,u.y,r.x,r.y)}break;case"S":case"s":while(!i.isCommandOrEnd()){var s=i.current,l=i.getReflectedControlPoint(),u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,l);c.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,r.x,r.y);t!=null&&t.bezierCurveTo(l.x,l.y,u.x,u.y,r.x,r.y)}break;case"Q":case"q":while(!i.isCommandOrEnd()){var s=i.current,u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,u);c.addQuadraticCurve(s.x,s.y,u.x,u.y,r.x,r.y);t!=null&&t.quadraticCurveTo(u.x,u.y,r.x,r.y)}break;case"T":case"t":while(!i.isCommandOrEnd())s=i.current,u=i.getReflectedControlPoint(),i.control=u,r=i.getAsCurrentPoint(),i.addMarker(r,u,u),c.addQuadraticCurve(s.x,s.y,u.x,u.y,r.x,r.y),t!=null&&t.quadraticCurveTo(u.x,u.y,r.x,r.y);break;case"A":case"a":while(!i.isCommandOrEnd()){var s=i.current,e=i.getScalar(),o=i.getScalar(),a=i.getScalar()*(Math.PI/180),ct=i.getScalar(),g=i.getScalar(),r=i.getAsCurrentPoint(),h=new n.Point(Math.cos(a)*(s.x-r.x)/2+Math.sin(a)*(s.y-r.y)/2,-Math.sin(a)*(s.x-r.x)/2+Math.cos(a)*(s.y-r.y)/2),nt=Math.pow(h.x,2)/Math.pow(e,2)+Math.pow(h.y,2)/Math.pow(o,2);nt>1&&(e*=Math.sqrt(nt),o*=Math.sqrt(nt));w=(ct==g?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(o,2)-Math.pow(e,2)*Math.pow(h.y,2)-Math.pow(o,2)*Math.pow(h.x,2))/(Math.pow(e,2)*Math.pow(h.y,2)+Math.pow(o,2)*Math.pow(h.x,2)));isNaN(w)&&(w=0);var v=new n.Point(w*e*h.y/o,w*-o*h.x/e),p=new n.Point((s.x+r.x)/2+Math.cos(a)*v.x-Math.sin(a)*v.y,(s.y+r.y)/2+Math.sin(a)*v.x+Math.cos(a)*v.y),et=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))},b=function(n,t){return(n[0]*t[0]+n[1]*t[1])/(et(n)*et(t))},ot=function(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(b(n,t))},tt=ot([1,0],[(h.x-v.x)/e,(h.y-v.y)/o]),it=[(h.x-v.x)/e,(h.y-v.y)/o],rt=[(-h.x-v.x)/e,(-h.y-v.y)/o],k=ot(it,rt);b(it,rt)<=-1&&(k=Math.PI);b(it,rt)>=1&&(k=0);var ut=1-g?1:-1,d=tt+ut*(k/2),lt=new n.Point(p.x+e*Math.cos(d),p.y+o*Math.sin(d));if(i.addMarkerAngle(lt,d-ut*Math.PI/2),i.addMarkerAngle(r,d-ut*Math.PI),c.addPoint(r.x,r.y),t!=null){var b=e>o?e:o,st=e>o?1:e/o,ht=e>o?o/e:1;t.translate(p.x,p.y);t.rotate(a);t.scale(st,ht);t.arc(0,0,b,tt,tt+k,1-g);t.scale(1/st,1/ht);t.rotate(-a);t.translate(-p.x,-p.y)}}break;case"Z":case"z":t!=null&&t.closePath();i.current=i.start}}return c};this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),r=this.PathParser.getMarkerAngles(),i=[],n=0;n<t.length;n++)i.push([t[n],r[n]]);return i}},n.Element.path.prototype=new n.Element.PathElementBase,n.Element.pattern=function(t){this.base=n.Element.ElementBase;this.base(t);this.createPattern=function(t){var o=this.attribute("width").toPixels("x",!0),s=this.attribute("height").toPixels("y",!0),r=new n.Element.svg,i,u,f,e;for(r.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new n.Property("width",o+"px"),r.attributes.height=new n.Property("height",s+"px"),r.attributes.transform=new n.Property("transform",this.attribute("patternTransform").value),r.children=this.children,i=document.createElement("canvas"),i.width=o,i.height=s,u=i.getContext("2d"),this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&u.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0)),f=-1;f<=1;f++)for(e=-1;e<=1;e++)u.save(),u.translate(f*i.width,e*i.height),r.render(u),u.restore();return t.createPattern(i,"repeat")}},n.Element.pattern.prototype=new n.Element.ElementBase,n.Element.marker=function(t){this.base=n.Element.ElementBase;this.base(t);this.baseRender=this.render;this.render=function(t,i,r){t.translate(i.x,i.y);this.attribute("orient").valueOrDefault("auto")=="auto"&&t.rotate(r);this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth);t.save();var u=new n.Element.svg;u.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value);u.attributes.refX=new n.Property("refX",this.attribute("refX").value);u.attributes.refY=new n.Property("refY",this.attribute("refY").value);u.attributes.width=new n.Property("width",this.attribute("markerWidth").value);u.attributes.height=new n.Property("height",this.attribute("markerHeight").value);u.attributes.fill=new n.Property("fill",this.attribute("fill").valueOrDefault("black"));u.attributes.stroke=new n.Property("stroke",this.attribute("stroke").valueOrDefault("none"));u.children=this.children;u.render(t);t.restore();this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth);this.attribute("orient").valueOrDefault("auto")=="auto"&&t.rotate(-r);t.translate(-i.x,-i.y)}},n.Element.marker.prototype=new n.Element.ElementBase,n.Element.defs=function(t){this.base=n.Element.ElementBase;this.base(t);this.render=function(){}},n.Element.defs.prototype=new n.Element.ElementBase,n.Element.GradientBase=function(t){var i,r;for(this.base=n.Element.ElementBase,this.base(t),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[],i=0;i<this.children.length;i++)r=this.children[i],r.type=="stop"&&this.stops.push(r);this.getGradient=function(){};this.createGradient=function(t,i,r){var f=this,v,o,s,h,e,l,u,c,a;if(this.getHrefAttribute().hasValue()&&(f=this.getHrefAttribute().getDefinition()),v=function(t){if(r.hasValue()){var i=new n.Property("color",t);return i.addOpacity(r.value).value}return t},o=this.getGradient(t,i),o==null)return v(f.stops[f.stops.length-1].color);for(s=0;s<f.stops.length;s++)o.addColorStop(f.stops[s].offset,v(f.stops[s].color));return this.attribute("gradientTransform").hasValue()?(h=n.ViewPort.viewPorts[0],e=new n.Element.rect,e.attributes.x=new n.Property("x",-n.MAX_VIRTUAL_PIXELS/3),e.attributes.y=new n.Property("y",-n.MAX_VIRTUAL_PIXELS/3),e.attributes.width=new n.Property("width",n.MAX_VIRTUAL_PIXELS),e.attributes.height=new n.Property("height",n.MAX_VIRTUAL_PIXELS),l=new n.Element.g,l.attributes.transform=new n.Property("transform",this.attribute("gradientTransform").value),l.children=[e],u=new n.Element.svg,u.attributes.x=new n.Property("x",0),u.attributes.y=new n.Property("y",0),u.attributes.width=new n.Property("width",h.width),u.attributes.height=new n.Property("height",h.height),u.children=[l],c=document.createElement("canvas"),c.width=h.width,c.height=h.height,a=c.getContext("2d"),a.fillStyle=o,u.render(a),a.createPattern(c,"no-repeat")):o}},n.Element.GradientBase.prototype=new n.Element.ElementBase,n.Element.linearGradient=function(t){this.base=n.Element.GradientBase;this.base(t);this.getGradient=function(n,t){var i=t.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var r=this.gradientUnits=="objectBoundingBox"?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),u=this.gradientUnits=="objectBoundingBox"?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),f=this.gradientUnits=="objectBoundingBox"?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),e=this.gradientUnits=="objectBoundingBox"?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return r==f&&u==e?null:n.createLinearGradient(r,u,f,e)}},n.Element.linearGradient.prototype=new n.Element.GradientBase,n.Element.radialGradient=function(t){this.base=n.Element.GradientBase;this.base(t);this.getGradient=function(n,t){var i=t.getBoundingBox(),o;this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%");this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%");this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var r=this.gradientUnits=="objectBoundingBox"?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),u=this.gradientUnits=="objectBoundingBox"?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=r,e=u;return this.attribute("fx").hasValue()&&(f=this.gradientUnits=="objectBoundingBox"?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(e=this.gradientUnits=="objectBoundingBox"?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y")),o=this.gradientUnits=="objectBoundingBox"?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels(),n.createRadialGradient(f,e,0,r,u,o)}},n.Element.radialGradient.prototype=new n.Element.GradientBase,n.Element.stop=function(t){this.base=n.Element.ElementBase;this.base(t);this.offset=this.attribute("offset").numValue();this.offset<0&&(this.offset=0);this.offset>1&&(this.offset=1);var i=this.style("stop-color");this.style("stop-opacity").hasValue()&&(i=i.addOpacity(this.style("stop-opacity").value));this.color=i.value},n.Element.stop.prototype=new n.Element.ElementBase,n.Element.AnimateBase=function(t){this.base=n.Element.ElementBase;this.base(t);n.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var t=this.attribute("attributeType").value,n=this.attribute("attributeName").value;return t=="CSS"?this.parent.style(n,!0):this.parent.attribute(n,!0)};this.initialValue=null;this.initialUnits="";this.removed=!1;this.calcValue=function(){return""};this.update=function(n){var i,t,r;if(this.initialValue==null&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration)if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite")this.duration=0;else return this.attribute("fill").valueOrDefault("remove")!="remove"||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);return this.duration=this.duration+n,i=!1,this.begin<this.duration&&(t=this.calcValue(),this.attribute("type").hasValue()&&(r=this.attribute("type").value,t=r+"("+t+")"),this.getProperty().value=t,i=!0),i};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");this.values.hasValue()&&(this.values.value=this.values.value.split(";"));this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var i=t.progress*(this.values.value.length-1),r=Math.floor(i),u=Math.ceil(i);t.from=new n.Property("from",parseFloat(this.values.value[r]));t.to=new n.Property("to",parseFloat(this.values.value[u]));t.progress=(i-r)/(u-r)}else t.from=this.from,t.to=this.to;return t}},n.Element.AnimateBase.prototype=new n.Element.ElementBase,n.Element.animate=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){var n=this.progress(),t=n.from.numValue()+(n.to.numValue()-n.from.numValue())*n.progress;return t+this.initialUnits}},n.Element.animate.prototype=new n.Element.AnimateBase,n.Element.animateColor=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){var t=this.progress(),n=new RGBColor(t.from.value),i=new RGBColor(t.to.value);if(n.ok&&i.ok){var r=n.r+(i.r-n.r)*t.progress,u=n.g+(i.g-n.g)*t.progress,f=n.b+(i.b-n.b)*t.progress;return"rgb("+parseInt(r,10)+","+parseInt(u,10)+","+parseInt(f,10)+")"}return this.attribute("from").value}},n.Element.animateColor.prototype=new n.Element.AnimateBase,n.Element.animateTransform=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){for(var i=this.progress(),r=n.ToNumberArray(i.from.value),f=n.ToNumberArray(i.to.value),u="",t=0;t<r.length;t++)u+=r[t]+(f[t]-r[t])*i.progress+" ";return u}},n.Element.animateTransform.prototype=new n.Element.animate,n.Element.font=function(t){var r,i;for(this.base=n.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[],r=0;r<this.children.length;r++)i=this.children[r],i.type=="font-face"?(this.fontFace=i,i.style("font-family").hasValue()&&(n.Definitions[i.style("font-family").value]=this)):i.type=="missing-glyph"?this.missingGlyph=i:i.type=="glyph"&&(i.arabicForm!=""?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[i.unicode]=="undefined"&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)},n.Element.font.prototype=new n.Element.ElementBase,n.Element.fontface=function(t){this.base=n.Element.ElementBase;this.base(t);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()},n.Element.fontface.prototype=new n.Element.ElementBase,n.Element.missingglyph=function(t){this.base=n.Element.path;this.base(t);this.horizAdvX=0},n.Element.missingglyph.prototype=new n.Element.path,n.Element.glyph=function(t){this.base=n.Element.path;this.base(t);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value},n.Element.glyph.prototype=new n.Element.path,n.Element.text=function(t){this.captureTextNodes=!0;this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(n){this.baseSetContext(n);this.style("dominant-baseline").hasValue()&&(n.textBaseline=this.style("dominant-baseline").value);this.style("alignment-baseline").hasValue()&&(n.textBaseline=this.style("alignment-baseline").value)};this.getBoundingBox=function(){return new n.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)};this.renderChildren=function(n){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(n,this,0);for(var t=0;t<this.children.length;t++)this.renderChild(n,this,t)};this.getAnchorDelta=function(n,t,i){var e=this.style("text-anchor").valueOrDefault("start"),u,r,f;if(e!="start"){for(u=0,r=i;r<t.children.length;r++){if(f=t.children[r],r>i&&f.attribute("x").hasValue())break;u+=f.measureTextRecursive(n)}return-1*(e=="end"?u:u/2)}return 0};this.renderChild=function(n,t,i){var r=t.children[i],i;for(r.attribute("x").hasValue()?r.x=r.attribute("x").toPixels("x")+this.getAnchorDelta(n,t,i):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),r.attribute("dx").hasValue()&&(this.x+=r.attribute("dx").toPixels("x")),r.x=this.x),this.x=r.x+r.measureText(n),r.attribute("y").hasValue()?r.y=r.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),r.attribute("dy").hasValue()&&(this.y+=r.attribute("dy").toPixels("y")),r.y=this.y),this.y=r.y,r.render(n),i=0;i<r.children.length;i++)this.renderChild(n,r,i)}},n.Element.text.prototype=new n.Element.RenderedElementBase,n.Element.TextElementBase=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.getGlyph=function(n,t,i){var u=t[i],r=null,f;return n.isArabic?(f="isolated",(i==0||t[i-1]==" ")&&i<t.length-2&&t[i+1]!=" "&&(f="terminal"),i>0&&t[i-1]!=" "&&i<t.length-2&&t[i+1]!=" "&&(f="medial"),i>0&&t[i-1]!=" "&&(i==t.length-1||t[i+1]==" ")&&(f="initial"),typeof n.glyphs[u]!="undefined"&&(r=n.glyphs[u][f],r==null&&n.glyphs[u].type=="glyph"&&(r=n.glyphs[u]))):r=n.glyphs[u],r==null&&(r=n.missingGlyph),r};this.renderChildren=function(t){var i=this.parent.style("font-family").getDefinition(),e,r,s,u,c;if(i!=null){var o=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),h=this.parent.style("font-style").valueOrDefault(n.Font.Parse(n.ctx.font).fontStyle),f=this.getText();for(i.isRTL&&(f=f.split("").reverse().join("")),e=n.ToNumberArray(this.parent.attribute("dx").value),r=0;r<f.length;r++)s=this.getGlyph(i,f,r),u=o/i.fontFace.unitsPerEm,t.translate(this.x,this.y),t.scale(u,-u),c=t.lineWidth,t.lineWidth=t.lineWidth*i.fontFace.unitsPerEm/o,h=="italic"&&t.transform(1,0,.4,1,0,0),s.render(t),h=="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=c,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=o*(s.horizAdvX||i.horizAdvX)/i.fontFace.unitsPerEm,typeof e[r]=="undefined"||isNaN(e[r])||(this.x+=e[r]);return}t.fillStyle!=""&&t.fillText(n.compressSpaces(this.getText()),this.x,this.y);t.strokeStyle!=""&&t.strokeText(n.compressSpaces(this.getText()),this.x,this.y)};this.getText=function(){};this.measureTextRecursive=function(n){for(var i=this.measureText(n),t=0;t<this.children.length;t++)i+=this.children[t].measureTextRecursive(n);return i};this.measureText=function(t){var r=this.parent.style("font-family").getDefinition(),f,i,s,o,h;if(r!=null){var c=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),e=0,u=this.getText();for(r.isRTL&&(u=u.split("").reverse().join("")),f=n.ToNumberArray(this.parent.attribute("dx").value),i=0;i<u.length;i++)s=this.getGlyph(r,u,i),e+=(s.horizAdvX||r.horizAdvX)*c/r.fontFace.unitsPerEm,typeof f[i]=="undefined"||isNaN(f[i])||(e+=f[i]);return e}return(o=n.compressSpaces(this.getText()),!t.measureText)?o.length*10:(t.save(),this.setContext(t),h=t.measureText(o).width,t.restore(),h)}},n.Element.TextElementBase.prototype=new n.Element.RenderedElementBase,n.Element.tspan=function(t){this.captureTextNodes=!0;this.base=n.Element.TextElementBase;this.base(t);this.text=t.nodeValue||t.text||"";this.getText=function(){return this.text}},n.Element.tspan.prototype=new n.Element.TextElementBase,n.Element.tref=function(t){this.base=n.Element.TextElementBase;this.base(t);this.getText=function(){var n=this.getHrefAttribute().getDefinition();if(n!=null)return n.children[0].getText()}},n.Element.tref.prototype=new n.Element.TextElementBase,n.Element.a=function(t){this.base=n.Element.TextElementBase;this.base(t);this.hasText=!0;for(var i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType!=3&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(t){var r,i;this.hasText?(this.baseRenderChildren(t),r=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize),n.Mouse.checkBoundingBox(this,new n.BoundingBox(this.x,this.y-r.toPixels("y"),this.x+this.measureText(t),this.y))):(i=new n.Element.g,i.children=this.children,i.parent=this,i.render(t))};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){n.ctx.canvas.style.cursor="pointer"}},n.Element.a.prototype=new n.Element.TextElementBase,n.Element.image=function(t){var i,r,u;this.base=n.Element.RenderedElementBase;this.base(t);i=this.getHrefAttribute().value;r=i.match(/\.svg$/);n.Images.push(this);this.loaded=!1;r?(this.img=n.ajax(i),this.loaded=!0):(this.img=document.createElement("img"),u=this,this.img.onload=function(){u.loaded=!0},this.img.onerror=function(){typeof console!="undefined"&&(console.log('ERROR: image "'+i+'" not found'),u.loaded=!0)},this.img.src=i);this.renderChildren=function(t){var f=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),u=this.attribute("height").toPixels("y");i!=0&&u!=0&&(t.save(),r?t.drawSvg(this.img,f,e,i,u):(t.translate(f,e),n.AspectRatio(t,this.attribute("preserveAspectRatio").value,i,this.img.width,u,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())};this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),u=this.attribute("height").toPixels("y");return new n.BoundingBox(t,i,t+r,i+u)}},n.Element.image.prototype=new n.Element.RenderedElementBase,n.Element.g=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.getBoundingBox=function(){for(var i=new n.BoundingBox,t=0;t<this.children.length;t++)i.addBoundingBox(this.children[t].getBoundingBox());return i}},n.Element.g.prototype=new n.Element.RenderedElementBase,n.Element.symbol=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(t){if(this.baseSetContext(t),this.attribute("viewBox").hasValue()){var i=n.ToNumberArray(this.attribute("viewBox").value),r=i[0],u=i[1];width=i[2];height=i[3];n.AspectRatio(t,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,r,u);n.ViewPort.SetCurrent(i[2],i[3])}}},n.Element.symbol.prototype=new n.Element.RenderedElementBase,n.Element.style=function(t){var r,h,i,c,l,s,u,d,e,f,a,nt;for(this.base=n.Element.ElementBase,this.base(t),r="",i=0;i<t.childNodes.length;i++)r+=t.childNodes[i].nodeValue;for(r=r.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),r=n.compressSpaces(r),h=r.split("}"),i=0;i<h.length;i++)if(n.trim(h[i])!=""){var w=h[i].split("{"),b=w[0].split(","),o=w[1].split(";");for(c=0;c<b.length;c++)if(l=n.trim(b[c]),l!=""){for(s={},u=0;u<o.length;u++){var v=o[u].indexOf(":"),y=o[u].substr(0,v),k=o[u].substr(v+1,o[u].length-v);y!=null&&k!=null&&(s[n.trim(y)]=new n.Property(n.trim(y),n.trim(k)))}if(n.Styles[l]=s,l=="@font-face")for(d=s["font-family"].value.replace(/"/g,""),e=s.src.value.split(","),f=0;f<e.length;f++)if(e[f].indexOf('format("svg")')>0){var p=e[f].indexOf("url"),tt=e[f].indexOf(")",p),it=e[f].substr(p+5,tt-p-6),rt=n.parseXml(n.ajax(it)),g=rt.getElementsByTagName("font");for(a=0;a<g.length;a++)nt=n.CreateElement(g[a]),n.Definitions[d]=nt}}}},n.Element.style.prototype=new n.Element.ElementBase,n.Element.use=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(n){this.baseSetContext(n);this.attribute("x").hasValue()&&n.translate(this.attribute("x").toPixels("x"),0);this.attribute("y").hasValue()&&n.translate(0,this.attribute("y").toPixels("y"))};this.getDefinition=function(){var n=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(n.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(n.attribute("height",!0).value=this.attribute("height").value),n};this.path=function(n){var t=this.getDefinition();t!=null&&t.path(n)};this.getBoundingBox=function(){var n=this.getDefinition();if(n!=null)return n.getBoundingBox()};this.renderChildren=function(n){var t=this.getDefinition(),i;t!=null&&(i=t.parent,t.parent=null,t.render(n),t.parent=i)}},n.Element.use.prototype=new n.Element.RenderedElementBase,n.Element.mask=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(t,i){var h=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y"),r,l,v,o,a,s,u;if(f==0&&e==0){for(r=new n.BoundingBox,l=0;l<this.children.length;l++)r.addBoundingBox(this.children[l].getBoundingBox());var h=Math.floor(r.x1),c=Math.floor(r.y1),f=Math.floor(r.width()),e=Math.floor(r.height())}v=i.attribute("mask").value;i.attribute("mask").value="";o=document.createElement("canvas");o.width=h+f;o.height=c+e;a=o.getContext("2d");this.renderChildren(a);s=document.createElement("canvas");s.width=h+f;s.height=c+e;u=s.getContext("2d");i.render(u);u.globalCompositeOperation="destination-in";u.fillStyle=a.createPattern(o,"no-repeat");u.fillRect(0,0,h+f,c+e);t.fillStyle=u.createPattern(s,"no-repeat");t.fillRect(0,0,h+f,c+e);i.attribute("mask").value=v};this.render=function(){}},n.Element.mask.prototype=new n.Element.ElementBase,n.Element.clipPath=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(t){for(var i,r,u=0;u<this.children.length;u++)i=this.children[u],typeof i.path!="undefined"&&(r=null,i.attribute("transform").hasValue()&&(r=new n.Transform(i.attribute("transform").value),r.apply(t)),i.path(t),t.clip(),r&&r.unapply(t))};this.render=function(){}},n.Element.clipPath.prototype=new n.Element.ElementBase,n.Element.filter=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(n,t){var e=t.getBoundingBox(),l=Math.floor(e.x1),a=Math.floor(e.y1),o=Math.floor(e.width()),s=Math.floor(e.height()),v=t.style("filter").value,i,r,c,f,h,u;for(t.style("filter").value="",i=0,r=0,u=0;u<this.children.length;u++)c=this.children[u].extraFilterDistance||0,i=Math.max(i,c),r=Math.max(r,c);for(f=document.createElement("canvas"),f.width=o+2*i,f.height=s+2*r,h=f.getContext("2d"),h.translate(-l+i,-a+r),t.render(h),u=0;u<this.children.length;u++)this.children[u].apply(h,0,0,o+2*i,s+2*r);n.drawImage(f,0,0,o+2*i,s+2*r,l-i,a-r,o+2*i,s+2*r);t.style("filter",!0).value=v};this.render=function(){}},n.Element.filter.prototype=new n.Element.ElementBase,n.Element.feMorphology=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(){}},n.Element.feMorphology.prototype=new n.Element.ElementBase,n.Element.feColorMatrix=function(t){function i(n,t,i,r,u,f){return n[i*r*4+t*4+f]}function r(n,t,i,r,u,f,e){n[i*r*4+t*4+f]=e}this.base=n.Element.ElementBase;this.base(t);this.apply=function(n,t,u,f,e){for(var t,o=n.getImageData(0,0,f,e),u=0;u<e;u++)for(t=0;t<f;t++){var h=i(o.data,t,u,f,e,0),c=i(o.data,t,u,f,e,1),l=i(o.data,t,u,f,e,2),s=(h+c+l)/3;r(o.data,t,u,f,e,0,s);r(o.data,t,u,f,e,1,s);r(o.data,t,u,f,e,2,s)}n.clearRect(0,0,f,e);n.putImageData(o,0,0)}},n.Element.feColorMatrix.prototype=new n.Element.ElementBase,n.Element.feGaussianBlur=function(t){this.base=n.Element.ElementBase;this.base(t);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(t,i,r,u,f){if(typeof stackBlurCanvasRGBA=="undefined"){typeof console!="undefined"&&console.log("ERROR: StackBlur.js must be included for blur to work");return}t.canvas.id=n.UniqueId();t.canvas.style.display="none";document.body.appendChild(t.canvas);stackBlurCanvasRGBA(t.canvas.id,i,r,u,f,this.blurRadius);document.body.removeChild(t.canvas)}},n.Element.feGaussianBlur.prototype=new n.Element.ElementBase,n.Element.title=function(){},n.Element.title.prototype=new n.Element.ElementBase,n.Element.desc=function(){},n.Element.desc.prototype=new n.Element.ElementBase,n.Element.MISSING=function(n){typeof console!="undefined"&&console.log("ERROR: Element '"+n.nodeName+"' not yet implemented.")},n.Element.MISSING.prototype=new n.Element.ElementBase,n.CreateElement=function(t){var i=t.nodeName.replace(/^[^:]+:/,""),r;return i=i.replace(/\-/g,""),r=null,r=typeof n.Element[i]!="undefined"?new n.Element[i](t):new n.Element.MISSING(t),r.type=t.nodeName,r},n.load=function(t,i){n.loadXml(t,n.ajax(i))},n.loadXml=function(t,i){n.loadXmlDoc(t,n.parseXml(i))},n.loadXmlDoc=function(t,i){var u,r;n.init(t);u=function(n){for(var i=t.canvas;i;)n.x-=i.offsetLeft,n.y-=i.offsetTop,i=i.offsetParent;return window.scrollX&&(n.x+=window.scrollX),window.scrollY&&(n.y+=window.scrollY),n};n.opts.ignoreMouse!=!0&&(t.canvas.onclick=function(t){var i=u(new n.Point(t!=null?t.clientX:event.clientX,t!=null?t.clientY:event.clientY));n.Mouse.onclick(i.x,i.y)},t.canvas.onmousemove=function(t){var i=u(new n.Point(t!=null?t.clientX:event.clientX,t!=null?t.clientY:event.clientY));n.Mouse.onmousemove(i.x,i.y)});r=n.CreateElement(i.documentElement);r.root=!0;var e=!0,o=function(){var u,f;if(n.ViewPort.Clear(),t.canvas.parentNode&&n.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),n.opts.ignoreDimensions!=!0&&(r.style("width").hasValue()&&(t.canvas.width=r.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),r.style("height").hasValue()&&(t.canvas.height=r.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px")),u=t.canvas.clientWidth||t.canvas.width,f=t.canvas.clientHeight||t.canvas.height,n.opts.ignoreDimensions==!0&&r.style("width").hasValue()&&r.style("height").hasValue()&&(u=r.style("width").toPixels("x"),f=r.style("height").toPixels("y")),n.ViewPort.SetCurrent(u,f),n.opts.offsetX!=null&&(r.attribute("x",!0).value=n.opts.offsetX),n.opts.offsetY!=null&&(r.attribute("y",!0).value=n.opts.offsetY),n.opts.scaleWidth!=null&&n.opts.scaleHeight!=null){var s=1,h=1,o=n.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?s=r.attribute("width").toPixels("x")/n.opts.scaleWidth:isNaN(o[2])||(s=o[2]/n.opts.scaleWidth);r.attribute("height").hasValue()?h=r.attribute("height").toPixels("y")/n.opts.scaleHeight:isNaN(o[3])||(h=o[3]/n.opts.scaleHeight);r.attribute("width",!0).value=n.opts.scaleWidth;r.attribute("height",!0).value=n.opts.scaleHeight;r.attribute("viewBox",!0).value="0 0 "+u*s+" "+f*h;r.attribute("preserveAspectRatio",!0).value="none"}n.opts.ignoreClear!=!0&&t.clearRect(0,0,u,f);r.render(t);e&&(e=!1,typeof n.opts.renderCallback=="function"&&n.opts.renderCallback(i))},f=!0;n.ImagesLoaded()&&(f=!1,o());n.intervalID=setInterval(function(){var t=!1,i;if(f&&n.ImagesLoaded()&&(f=!1,t=!0),n.opts.ignoreMouse!=!0&&(t=t|n.Mouse.hasEvents()),n.opts.ignoreAnimation!=!0)for(i=0;i<n.Animations.length;i++)t=t|n.Animations[i].update(1e3/n.FRAMERATE);typeof n.opts.forceRedraw=="function"&&n.opts.forceRedraw()==!0&&(t=!0);t&&(o(),n.Mouse.runEvents())},1e3/n.FRAMERATE)},n.stop=function(){n.intervalID&&clearInterval(n.intervalID)},n.Mouse=new function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(n,t){this.events.push({type:"onclick",x:n,y:t,run:function(n){n.onclick&&n.onclick()}})};this.onmousemove=function(n,t){this.events.push({type:"onmousemove",x:n,y:t,run:function(n){n.onmousemove&&n.onmousemove()}})};this.eventElements=[];this.checkPath=function(n,t){for(var r,i=0;i<this.events.length;i++)r=this.events[i],t.isPointInPath&&t.isPointInPath(r.x,r.y)&&(this.eventElements[i]=n)};this.checkBoundingBox=function(n,t){for(var r,i=0;i<this.events.length;i++)r=this.events[i],t.isPointInBox(r.x,r.y)&&(this.eventElements[i]=n)};this.runEvents=function(){var t,r,i;for(n.ctx.canvas.style.cursor="",t=0;t<this.events.length;t++)for(r=this.events[t],i=this.eventElements[t];i;)r.run(i),i=i.parent;this.events=[];this.eventElements=[]}},n}this.canvg=function(t,i,r){var h,o,u,e,c,f,s;if(t==null&&i==null&&r==null){for(h=document.getElementsByTagName("svg"),o=0;o<h.length;o++)u=h[o],e=document.createElement("canvas"),e.width=u.clientWidth,e.height=u.clientHeight,u.parentNode.insertBefore(e,u),u.parentNode.removeChild(u),c=document.createElement("div"),c.appendChild(u),canvg(e,c.innerHTML);return}r=r||{};typeof t=="string"&&(t=document.getElementById(t));t.svg!=null&&t.svg.stop();f=n();t.childNodes.length==1&&t.childNodes[0].nodeName=="OBJECT"||(t.svg=f);f.opts=r;s=t.getContext("2d");typeof i.documentElement!="undefined"?f.loadXmlDoc(s,i):i.substr(0,1)=="<"?f.loadXml(s,i):f.load(s,i)}})();typeof CanvasRenderingContext2D!="undefined"&&(CanvasRenderingContext2D.prototype.drawSvg=function(n,t,i,r,u){canvg(this.canvas,n,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:t,offsetY:i,scaleWidth:r,scaleHeight:u})});
//# sourceMappingURL=canvg.min.js.map
