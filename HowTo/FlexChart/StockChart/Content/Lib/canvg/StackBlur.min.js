function stackBlurImage(n,t,i,r){var o=document.getElementById(n),u=o.naturalWidth,f=o.naturalHeight,e=document.getElementById(t),s;(e.style.width=u+"px",e.style.height=f+"px",e.width=u,e.height=f,s=e.getContext("2d"),s.clearRect(0,0,u,f),s.drawImage(o,0,0),isNaN(i)||i<1)||(r?stackBlurCanvasRGBA(t,0,0,u,f,i):stackBlurCanvasRGB(t,0,0,u,f,i))}function stackBlurCanvasRGBA(n,t,i,r,u,f){var ii,wt,bt,ti,l,y,et,ot;if(!isNaN(f)&&!(f<1)){f|=0;ii=document.getElementById(n);wt=ii.getContext("2d");try{try{bt=wt.getImageData(t,i,r,u)}catch(ri){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");bt=wt.getImageData(t,i,r,u)}catch(ri){alert("Cannot access local image");throw new Error("unable to access local image data: "+ri);}}}catch(ri){alert("Cannot access image");throw new Error("unable to access image data: "+ri);}for(var e=bt.data,tt,yt,h,dt,c,gt,k,d,g,nt,st,ht,ct,lt,it,rt,ut,ft,p,w,b,s,at,ui=f+f+1,fi=r<<2,kt=r-1,ni=u-1,v=f+1,vt=v*(v+1)/2,pt=new BlurStack,o=pt,a=1;a<ui;a++)o=o.next=new BlurStack,a==v&&(ti=o);for(o.next=pt,l=null,y=null,gt=c=0,et=mul_table[f],ot=shg_table[f],yt=0;yt<u;yt++){for(it=rt=ut=ft=k=d=g=nt=0,st=v*(p=e[c]),ht=v*(w=e[c+1]),ct=v*(b=e[c+2]),lt=v*(s=e[c+3]),k+=vt*p,d+=vt*w,g+=vt*b,nt+=vt*s,o=pt,a=0;a<v;a++)o.r=p,o.g=w,o.b=b,o.a=s,o=o.next;for(a=1;a<v;a++)h=c+((kt<a?kt:a)<<2),k+=(o.r=p=e[h])*(at=v-a),d+=(o.g=w=e[h+1])*at,g+=(o.b=b=e[h+2])*at,nt+=(o.a=s=e[h+3])*at,it+=p,rt+=w,ut+=b,ft+=s,o=o.next;for(l=pt,y=ti,tt=0;tt<r;tt++)e[c+3]=s=nt*et>>ot,s!=0?(s=255/s,e[c]=(k*et>>ot)*s,e[c+1]=(d*et>>ot)*s,e[c+2]=(g*et>>ot)*s):e[c]=e[c+1]=e[c+2]=0,k-=st,d-=ht,g-=ct,nt-=lt,st-=l.r,ht-=l.g,ct-=l.b,lt-=l.a,h=gt+((h=tt+f+1)<kt?h:kt)<<2,it+=l.r=e[h],rt+=l.g=e[h+1],ut+=l.b=e[h+2],ft+=l.a=e[h+3],k+=it,d+=rt,g+=ut,nt+=ft,l=l.next,st+=p=y.r,ht+=w=y.g,ct+=b=y.b,lt+=s=y.a,it-=p,rt-=w,ut-=b,ft-=s,y=y.next,c+=4;gt+=r}for(tt=0;tt<r;tt++){for(rt=ut=ft=it=d=g=nt=k=0,c=tt<<2,st=v*(p=e[c]),ht=v*(w=e[c+1]),ct=v*(b=e[c+2]),lt=v*(s=e[c+3]),k+=vt*p,d+=vt*w,g+=vt*b,nt+=vt*s,o=pt,a=0;a<v;a++)o.r=p,o.g=w,o.b=b,o.a=s,o=o.next;for(dt=r,a=1;a<=f;a++)c=dt+tt<<2,k+=(o.r=p=e[c])*(at=v-a),d+=(o.g=w=e[c+1])*at,g+=(o.b=b=e[c+2])*at,nt+=(o.a=s=e[c+3])*at,it+=p,rt+=w,ut+=b,ft+=s,o=o.next,a<ni&&(dt+=r);for(c=tt,l=pt,y=ti,yt=0;yt<u;yt++)h=c<<2,e[h+3]=s=nt*et>>ot,s>0?(s=255/s,e[h]=(k*et>>ot)*s,e[h+1]=(d*et>>ot)*s,e[h+2]=(g*et>>ot)*s):e[h]=e[h+1]=e[h+2]=0,k-=st,d-=ht,g-=ct,nt-=lt,st-=l.r,ht-=l.g,ct-=l.b,lt-=l.a,h=tt+((h=yt+v)<ni?h:ni)*r<<2,k+=it+=l.r=e[h],d+=rt+=l.g=e[h+1],g+=ut+=l.b=e[h+2],nt+=ft+=l.a=e[h+3],l=l.next,st+=p=y.r,ht+=w=y.g,ct+=b=y.b,lt+=s=y.a,it-=p,rt-=w,ut-=b,ft-=s,y=y.next,c+=r}wt.putImageData(bt,t,i)}}function stackBlurCanvasRGB(n,t,i,r,u,f){var dt,at,vt,kt,l,w,ot,st;if(!isNaN(f)&&!(f<1)){f|=0;dt=document.getElementById(n);at=dt.getContext("2d");try{try{vt=at.getImageData(t,i,r,u)}catch(gt){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");vt=at.getImageData(t,i,r,u)}catch(gt){alert("Cannot access local image");throw new Error("unable to access local image data: "+gt);}}}catch(gt){alert("Cannot access image");throw new Error("unable to access image data: "+gt);}for(var o=vt.data,g,et,h,pt,c,wt,b,k,d,rt,ut,ft,nt,tt,it,v,y,p,ht,ni=f+f+1,ti=r<<2,yt=r-1,bt=u-1,a=f+1,ct=a*(a+1)/2,lt=new BlurStack,e=lt,s=1;s<ni;s++)e=e.next=new BlurStack,s==a&&(kt=e);for(e.next=lt,l=null,w=null,wt=c=0,ot=mul_table[f],st=shg_table[f],et=0;et<u;et++){for(nt=tt=it=b=k=d=0,rt=a*(v=o[c]),ut=a*(y=o[c+1]),ft=a*(p=o[c+2]),b+=ct*v,k+=ct*y,d+=ct*p,e=lt,s=0;s<a;s++)e.r=v,e.g=y,e.b=p,e=e.next;for(s=1;s<a;s++)h=c+((yt<s?yt:s)<<2),b+=(e.r=v=o[h])*(ht=a-s),k+=(e.g=y=o[h+1])*ht,d+=(e.b=p=o[h+2])*ht,nt+=v,tt+=y,it+=p,e=e.next;for(l=lt,w=kt,g=0;g<r;g++)o[c]=b*ot>>st,o[c+1]=k*ot>>st,o[c+2]=d*ot>>st,b-=rt,k-=ut,d-=ft,rt-=l.r,ut-=l.g,ft-=l.b,h=wt+((h=g+f+1)<yt?h:yt)<<2,nt+=l.r=o[h],tt+=l.g=o[h+1],it+=l.b=o[h+2],b+=nt,k+=tt,d+=it,l=l.next,rt+=v=w.r,ut+=y=w.g,ft+=p=w.b,nt-=v,tt-=y,it-=p,w=w.next,c+=4;wt+=r}for(g=0;g<r;g++){for(tt=it=nt=k=d=b=0,c=g<<2,rt=a*(v=o[c]),ut=a*(y=o[c+1]),ft=a*(p=o[c+2]),b+=ct*v,k+=ct*y,d+=ct*p,e=lt,s=0;s<a;s++)e.r=v,e.g=y,e.b=p,e=e.next;for(pt=r,s=1;s<=f;s++)c=pt+g<<2,b+=(e.r=v=o[c])*(ht=a-s),k+=(e.g=y=o[c+1])*ht,d+=(e.b=p=o[c+2])*ht,nt+=v,tt+=y,it+=p,e=e.next,s<bt&&(pt+=r);for(c=g,l=lt,w=kt,et=0;et<u;et++)h=c<<2,o[h]=b*ot>>st,o[h+1]=k*ot>>st,o[h+2]=d*ot>>st,b-=rt,k-=ut,d-=ft,rt-=l.r,ut-=l.g,ft-=l.b,h=g+((h=et+a)<bt?h:bt)*r<<2,b+=nt+=l.r=o[h],k+=tt+=l.g=o[h+1],d+=it+=l.b=o[h+2],l=l.next,rt+=v=w.r,ut+=y=w.g,ft+=p=w.b,nt-=v,tt-=y,it-=p,w=w.next,c+=r}at.putImageData(vt,t,i)}}function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];
//# sourceMappingURL=StackBlur.min.js.map
